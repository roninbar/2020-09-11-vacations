{"version":3,"sources":["features/utils.js","features/userSlice.js","components/private-route.js","components/vacation.js","features/vacationsSlice.js","components/dialog.js","pages/home-page.js","pages/login-form.js","pages/signup-form.js","pages/chart.js","App.js","app/store.js","serviceWorker.js","index.js"],"names":["requestJson","url","options","a","fetch","response","status","statusText","json","Error","logInAsync","createAsyncThunk","username","password","body","URLSearchParams","set","method","logOutAsync","reset","user","id","name","role","userSlice","createSlice","initialState","error","extraReducers","pending","loading","fulfilled","payload","rejected","withRedux","connect","Component","component","rest","render","props","to","pathname","state","referer","location","entities","Html5Entities","TextField","withStyles","form","flexGrow","display","flexFlow","classes","onSubmit","onClickAway","ClickAwayListener","className","fullWidth","Vacation","editing","fields","this","setState","what","target","value","setField","date","format","e","preventDefault","fireChangeFields","key","quitEditing","_","isEmpty","onChangeFields","innerText","destination","from","price","description","image","followers","isFollowing","onChangeFollowing","onDelete","userRole","Card","root","CardMedia","media","title","variant","autoFocus","type","onChange","bind","onSubmitTextField","onKeyUp","inputProps","pattern","imageEditTextField","IconButton","imageEditButton","onClick","onClickEditButton","CardContent","onBlur","onBlurDestination","Typography","contentRow","gutterBottom","onSubmitDates","datesForm","disablePast","disableToolbar","margin","label","onChangeDate","onAccept","onAcceptDate","Button","Box","fontWeight","decode","contentEditable","suppressContentEditableWarning","CardActions","actions","Badge","badgeContent","color","ToggleButton","selected","Boolean","PureComponent","defaultVacationProps","defaultProps","height","position","backgroundSize","endsWith","right","bottom","left","opacity","backgroundColor","outlineColor","flexDirection","alignItems","outline","outlineRadius","loadAllAsync","loadOneAsync","addAsync","requestJsonWithBody","changeAsync","deleteAsync","headers","JSON","stringify","updateVacation","vacation","vacations","find","v","Object","assign","push","vacationsSlice","reducers","setFollowing","meta","arg","DialogTitle","theme","padding","spacing","closeButton","top","palette","grey","children","onClose","other","disableTypography","content","okButton","transitionProperty","open","okButtonLabel","onOk","onCancel","DialogContent","dividers","DialogActions","HomePage","add","idToDelete","newVacationProps","closeAddDialog","vacationId","destinationToDelete","startToDelete","finishToDelete","Container","maxWidth","utils","MomentUtils","Grid","container","map","item","xs","sm","md","xl","Fab","openAddDialog","fab","onOkAddDialog","onOkDelete","onCancelDelete","TableContainer","Paper","Table","TableHead","TableRow","TableCell","align","colSpan","TableBody","scope","Backdrop","loadingBackdrop","LinearProgress","progress","length","emptyBackdrop","Snackbar","message","Alert","severity","elevation","mapDispatchToProps","sort","withRouter","logout","float","zIndex","drawer","width","LoginForm","history","submitted","noValidate","autoComplete","onChangeField","size","disabled","CircularProgress","SignupForm","firstname","lastname","password2","available","helperText","ref","submitButton","prevProps","prevUsername","Chart","chartOptions","chart","text","xAxis","categories","yAxis","min","labels","overflow","tooltip","plotOptions","bar","dataLabels","enabled","legend","credits","series","highcharts","Highcharts","updateChartOptions","prevVacations","currVacations","xor","restXAxis","restChartOptions","data","formatCategory","y","filter","App","menuAnchorEl","currentTarget","AppBar","Toolbar","edge","onClickMenuButton","menuButton","Menu","anchorEl","onCloseMenu","MenuItem","exact","path","marginRight","configureStore","reducer","userReducer","vacationsReducer","window","hostname","match","ReactDOM","StrictMode","store","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c2443d95.chunk.js","sourcesContent":["/**\r\n * Send an HTTP request that expects a JSON response.\r\n * @param {string} url \r\n * @param {object} options \r\n */\r\nexport async function requestJson(url, options) {\r\n    const response = await fetch(url, options);\r\n    const { status, statusText } = response;\r\n    if (200 <= status && status < 300) {\r\n        return await response.json();\r\n    }\r\n    else {\r\n        throw new Error(`${status} ${statusText}`);\r\n    }\r\n}\r\n\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { requestJson } from './utils';\r\n\r\nexport const logInAsync = createAsyncThunk(\r\n    'user/login',\r\n    async function ({ username, password }) {\r\n        const body = new URLSearchParams();\r\n        body.set('username', username);\r\n        body.set('password', password);\r\n        return await requestJson('/user/login', {\r\n            method: 'POST',\r\n            body,\r\n        });\r\n    },\r\n);\r\n\r\nexport const logOutAsync = createAsyncThunk(\r\n    'user/logout',\r\n    async function () {\r\n        const { status, statusText } = await fetch('/user/logout', { method: 'POST' });\r\n        if (200 <= status && status < 300) {\r\n            return statusText;\r\n        } else {\r\n            throw new Error(`${status} ${statusText}`);\r\n        }\r\n    },\r\n);\r\n\r\nconst userSlice = createSlice({\r\n    name: 'user',\r\n    initialState: {\r\n        error: false,\r\n        id: 0,\r\n        name: '',\r\n        role: '',\r\n    },\r\n    extraReducers: {\r\n        [logInAsync.pending](user) {\r\n            user.error = false;\r\n            user.loading = true;\r\n        },\r\n        [logInAsync.fulfilled](user, { payload: { id, name, role } }) {\r\n            user.loading = false;\r\n            user.error = false;\r\n            user.id = id;\r\n            user.name = name;\r\n            user.role = role;\r\n        },\r\n        [logInAsync.rejected](user, { error }) {\r\n            user.loading = false;\r\n            user.error = error;\r\n            reset(user);\r\n        },\r\n        [logOutAsync.pending](user) {\r\n            user.error = false;\r\n            user.loading = true;\r\n        },\r\n        [logOutAsync.fulfilled](user) {\r\n            user.loading = false;\r\n            user.error = false;\r\n            reset(user);\r\n        },\r\n        [logOutAsync.rejected](user, { error }) {\r\n            user.loading = false;\r\n            user.error = error;\r\n        },\r\n    },\r\n});\r\n\r\nfunction reset(user) {\r\n    user.id = 0;\r\n    user.name = '';\r\n    user.role = '';\r\n}\r\n\r\nexport default userSlice.reducer;\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\n// https://medium.com/better-programming/building-basic-react-authentication-e20a574d5e71\r\n\r\nfunction PrivateRoute({ username, component: Component, ...rest }) {\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        username ? (\r\n          <Component {...props} />\r\n        ) : (\r\n            <Redirect\r\n              to={{ pathname: '/login', state: { referer: props.location } }}\r\n            />\r\n          )\r\n      }\r\n    />\r\n  );\r\n  \r\n}\r\n\r\nconst withRedux = connect(({ user: { name: username } }) => ({ username }), null);\r\n\r\nexport default withRedux(PrivateRoute);","import { Badge, Box, Button, Card, CardActions, CardContent, CardMedia, ClickAwayListener, IconButton, TextField as MuiTextField, Typography, withStyles } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { ToggleButton } from '@material-ui/lab';\r\nimport { KeyboardDatePicker } from '@material-ui/pickers';\r\nimport { Html5Entities } from 'html-entities';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport PropTypes from 'prop-types';\r\nimport React, { PureComponent } from 'react';\r\n\r\nconst entities = new Html5Entities();\r\n\r\nconst TextField = withStyles({\r\n    form: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        flexFlow: 'row nowrap',\r\n    },\r\n})(\r\n    function ({ classes, onSubmit, onClickAway, ...rest }) {\r\n        return (\r\n            <ClickAwayListener onClickAway={onClickAway}>\r\n                <form className={classes.form} onSubmit={onSubmit}>\r\n                    <MuiTextField fullWidth={true} {...rest} />\r\n                </form>\r\n            </ClickAwayListener>\r\n        );\r\n    }\r\n)\r\n\r\nclass Vacation extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editing: 'nothing',\r\n            fields: {},\r\n        };\r\n    }\r\n\r\n    quitEditing() {\r\n        this.setState({\r\n            fields: {},\r\n            editing: 'nothing',\r\n        });\r\n    }\r\n\r\n    onClickEditButton(what) {\r\n        this.setState({\r\n            editing: what,\r\n        });\r\n    }\r\n\r\n    onChange({ target: { name, value } }) {\r\n        this.setField(name, value);\r\n    }\r\n\r\n    onChangeDate(name, date, value) {\r\n        this.setField(name, value);\r\n    }\r\n\r\n    onAcceptDate(name, date) {\r\n        this.setField(name, date.format('yyyy-MM-DD'));\r\n    }\r\n\r\n    setField(name, value) {\r\n        const { fields } = this.state;\r\n        this.setState({\r\n            fields: {\r\n                ...fields,\r\n                [name]: value,\r\n            },\r\n        });\r\n    }\r\n\r\n    onSubmitTextField(e) {\r\n        e.preventDefault();\r\n        this.fireChangeFields();\r\n    }\r\n\r\n    onSubmitDates(e) {\r\n        e.preventDefault();\r\n        this.fireChangeFields();\r\n    }\r\n\r\n    onKeyUp(e) {\r\n        if (e.key === 'Escape') {\r\n            this.quitEditing();\r\n        }\r\n    }\r\n\r\n    onClickAway() {\r\n        this.fireChangeFields();\r\n    }\r\n\r\n    fireChangeFields() {\r\n        const { fields } = this.state;\r\n        if (!_.isEmpty(fields)) {\r\n            const { onChangeFields } = this.props;\r\n            onChangeFields(fields);\r\n        }\r\n        this.quitEditing();\r\n    }\r\n\r\n    /**\r\n     * Method to call when a content-editable element loses focus.\r\n     * @param {string} name Name of field to update\r\n     * @param {Event} param1 \"Blur\" event\r\n     */\r\n    onBlur(name, { target: { innerText: value } }) {\r\n        const { onChangeFields, [name]: prevValue } = this.props;\r\n        if (value !== prevValue) {\r\n            return onChangeFields({ [name]: value });\r\n        }\r\n    }\r\n\r\n    onBlurDestination(e) {\r\n        this.fireChangeFields();\r\n    }\r\n\r\n    render() {\r\n        const { id, destination, from, to, price, description, image, followers, isFollowing, onChangeFollowing, onDelete, userRole, classes } = this.props;\r\n        const { editing } = this.state;\r\n\r\n        return (\r\n            <Card className={classes.root}>\r\n\r\n                <CardMedia className={classes.media + (editing === 'image' ? ' editing' : '')} image={image} title={destination}>\r\n                    {userRole === 'admin' &&\r\n                        <div className=\"overlay\">\r\n                            {editing === 'image'\r\n                                ? (\r\n                                    <TextField\r\n                                        variant=\"outlined\"\r\n                                        autoFocus\r\n                                        type=\"text\"\r\n                                        name=\"image\"\r\n                                        value={typeof this.state.fields?.image === 'string' ? this.state.fields?.image : image}\r\n                                        onChange={this.onChange.bind(this)}\r\n                                        onSubmit={this.onSubmitTextField.bind(this)}\r\n                                        onClickAway={this.onClickAway.bind(this)}\r\n                                        onKeyUp={this.onKeyUp.bind(this)}\r\n                                        inputProps={{\r\n                                            pattern: '^(?:([A-Za-z]+):)?(\\\\/{0,3})([0-9.\\\\-A-Za-z]+)(?::(\\\\d+))?(?:\\\\/([^?#]*))?(?:\\\\?([^#]*))?(?:#(.*))?$',\r\n                                        }}\r\n                                        className={classes.imageEditTextField}\r\n                                    />)\r\n                                : (\r\n                                    <IconButton className={classes.imageEditButton} onClick={this.onClickEditButton.bind(this, 'image')}>\r\n                                        <EditIcon />\r\n                                    </IconButton>)\r\n                            }\r\n                        </div>\r\n                    }\r\n                </CardMedia>\r\n\r\n                <CardContent>\r\n\r\n                    {/* Destination */}\r\n                    {editing === 'destination'\r\n                        ? (\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                name=\"destination\"\r\n                                value={typeof this.state.fields?.destination === 'string' ? this.state.fields?.destination : destination}\r\n                                onChange={this.onChange.bind(this)}\r\n                                onSubmit={this.onSubmitTextField.bind(this)}\r\n                                onClickAway={this.onClickAway.bind(this)}\r\n                                onKeyUp={this.onKeyUp.bind(this)}\r\n                                onBlur={this.onBlurDestination.bind(this)}\r\n                                autoFocus\r\n                            />\r\n                        ) : (\r\n                            <Typography className={classes.contentRow} variant=\"h5\" gutterBottom>\r\n                                {destination}\r\n                                {userRole === 'admin' && editing === 'nothing' &&\r\n                                    <div className=\"overlay\">\r\n                                        <IconButton onClick={this.onClickEditButton.bind(this, 'destination')}>\r\n                                            <EditIcon />\r\n                                        </IconButton>\r\n                                    </div>\r\n                                }\r\n                            </Typography>\r\n                        )\r\n                    }\r\n\r\n                    {/* Dates */}\r\n                    {editing === 'dates'\r\n                        ? (\r\n                            <ClickAwayListener onClickAway={this.onClickAway.bind(this)}>\r\n                                <form onSubmit={this.onSubmitDates.bind(this)} className={classes.datesForm}>\r\n                                    <KeyboardDatePicker\r\n                                        disablePast\r\n                                        disableToolbar\r\n                                        variant=\"inline\"\r\n                                        format=\"yyyy-MM-DD\"\r\n                                        margin=\"normal\"\r\n                                        label=\"Start Date\"\r\n                                        name=\"from\"\r\n                                        value={this.state.fields?.from || from}\r\n                                        onChange={this.onChangeDate.bind(this, 'from')}\r\n                                        onAccept={this.onAcceptDate.bind(this, 'from')}\r\n                                    />\r\n                                    <KeyboardDatePicker\r\n                                        disablePast\r\n                                        disableToolbar\r\n                                        variant=\"inline\"\r\n                                        format=\"yyyy-MM-DD\"\r\n                                        margin=\"normal\"\r\n                                        label=\"End Date\"\r\n                                        name=\"to\"\r\n                                        value={this.state.fields?.to || to}\r\n                                        onChange={this.onChangeDate.bind(this, 'to')}\r\n                                        onAccept={this.onAcceptDate.bind(this, 'to')}\r\n                                    />\r\n                                    <Button type=\"submit\">Update</Button>\r\n                                </form>\r\n                            </ClickAwayListener>)\r\n                        : (\r\n                            <Typography className={classes.contentRow} variant=\"subtitle1\" gutterBottom>\r\n                                <Box fontWeight=\"fontWeightBold\"\r\n                                    onBlur={this.onBlur.bind(this, 'dates')}\r\n                                >\r\n                                    {entities.decode(`${from}&ndash;${to}`)}\r\n                                </Box>\r\n                                {userRole === 'admin' && editing === 'nothing' &&\r\n                                    <div className=\"overlay\">\r\n                                        <IconButton onClick={this.onClickEditButton.bind(this, 'dates')}>\r\n                                            <EditIcon />\r\n                                        </IconButton>\r\n                                    </div>\r\n                                }\r\n                            </Typography>\r\n                        )\r\n                    }\r\n\r\n                    {/* Description */}\r\n                    <Typography\r\n                        className={classes.contentRow}\r\n                        variant=\"body1\"\r\n                        gutterBottom component=\"div\"\r\n                        contentEditable={userRole === 'admin'}\r\n                        suppressContentEditableWarning={true}\r\n                        onBlur={this.onBlur.bind(this, 'description')}\r\n                    >\r\n                        {description}\r\n                    </Typography>\r\n\r\n                    {/* Price */}\r\n                    <Typography variant=\"h6\">\r\n                        <Box fontWeight=\"fontWeightBold\">\r\n                            &euro;\r\n                            <span\r\n                                contentEditable={userRole === 'admin'}\r\n                                suppressContentEditableWarning={true}\r\n                                onBlur={this.onBlur.bind(this, 'price')}\r\n                                className={classes.contentRow}\r\n                            >\r\n                                {price}\r\n                            </span>\r\n                        </Box>\r\n                    </Typography>\r\n\r\n                </CardContent>\r\n\r\n                <CardActions className={classes.actions}>\r\n                    {userRole === 'user' &&\r\n                        <Badge badgeContent={followers} color=\"primary\">\r\n                            <ToggleButton value=\"check\" selected={Boolean(isFollowing)} onChange={() => onChangeFollowing(!isFollowing)} >\r\n                                <Typography variant=\"button\">Follow</Typography>\r\n                            </ToggleButton>\r\n                        </Badge>\r\n                    }\r\n                    {userRole === 'admin' && id > 0 &&\r\n                        <IconButton onClick={onDelete}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    }\r\n                </CardActions>\r\n\r\n            </Card >\r\n        );\r\n    }\r\n\r\n}\r\n\r\nVacation.propTypes = {\r\n    id: PropTypes.number,\r\n    userRole: PropTypes.oneOf(['user', 'admin']).isRequired,\r\n    destination: PropTypes.string.isRequired,\r\n    from: validDate,\r\n    to: validDate,\r\n    price: PropTypes.number,\r\n    description: PropTypes.string.isRequired,\r\n    image: function (props, propName, componentName) {\r\n        try {\r\n            return new URL(props[propName]) && null;\r\n        }\r\n        catch (error) {\r\n            return newError(error.message, componentName, propName, props);\r\n        }\r\n    },\r\n    followers: PropTypes.number.isRequired,\r\n    isFollowing: PropTypes.bool.isRequired,\r\n    onChangeFollowing: PropTypes.func,\r\n    onDelete: PropTypes.func,\r\n};\r\n\r\nexport const defaultVacationProps = {\r\n    id: 0,\r\n    destination: 'New Destination',\r\n    from: '2021-01-01',\r\n    to: '2021-01-07',\r\n    description: 'Lorem ipsum dolor sit amet consectetur, adipisicing elit. Labore consequuntur assumenda aspernatur dolore voluptatum nesciunt doloremque velit officia eius quia! Laudantium facere similique fugiat pariatur est. Quod repudiandae eveniet nihil.',\r\n    price: 0,\r\n    image: '/images/airplane.png',\r\n    followers: 0,\r\n    isFollowing: false,\r\n    userRole: 'admin',\r\n};\r\n\r\nVacation.defaultProps = defaultVacationProps;\r\n\r\nconst styles = {\r\n    root: {\r\n    },\r\n    media: {\r\n        height: 140,\r\n        position: 'relative',\r\n        backgroundSize: ({ image }) => image.endsWith('airplane.png') ? 'contain' : 'default',\r\n        '& .overlay': {\r\n            display: 'flex',\r\n            flexFlow: 'row-reverse nowrap',\r\n            position: 'absolute',\r\n            right: 0,\r\n            bottom: 0,\r\n            left: 0,\r\n            opacity: 0,\r\n            backgroundColor: 'black',\r\n        },\r\n        '&:hover .overlay': {\r\n            opacity: 0.5,\r\n        },\r\n        '&.editing .overlay': {\r\n            opacity: 1,\r\n        },\r\n    },\r\n    imageEditTextField: {\r\n        backgroundColor: 'white',\r\n    },\r\n    imageEditButton: {\r\n        color: 'rgba(255, 255, 255, 1.0)',\r\n    },\r\n    contentRow: {\r\n        position: 'relative',\r\n        outlineColor: '#3f51b5',\r\n        '& .overlay': {\r\n            display: 'none',\r\n            flexDirection: 'row-reverse',\r\n            position: 'absolute',\r\n            right: 0,\r\n            bottom: 0,\r\n            left: 0,\r\n        },\r\n        '&:hover .overlay': {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    datesForm: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        outline: '2px solid #3f51b5',\r\n        outlineRadius: '4px', // Firefox only\r\n    },\r\n    actions: {\r\n        flexDirection: ({ userRole }) => userRole === 'admin' ? 'row-reverse' : 'row',\r\n    },\r\n};\r\n\r\nexport default withStyles(styles)(Vacation);\r\n\r\nfunction validDate(props, propName, componentName) {\r\n    const date = moment(props[propName], 'yyyy-MM-DD', true);\r\n    return date.isValid() ? null : newError('Invalid date string', componentName, propName, props);\r\n};\r\n\r\nfunction newError(message, componentName, propName, props) {\r\n    return new Error(`${message} (in <${componentName} ${propName}={${props[propName]}} />)`);\r\n}\r\n\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { logOutAsync } from './userSlice';\r\nimport { requestJson } from './utils';\r\n\r\nexport const loadAllAsync = createAsyncThunk(\r\n    'vacations/loadAll',\r\n    async function() {\r\n        return await requestJson('/vacation/all');\r\n    },\r\n);\r\n\r\nexport const loadOneAsync = createAsyncThunk(\r\n    'vacations/loadOne',\r\n    async function (id) {\r\n        return await requestJson(`/vacation/${id}`);\r\n    },\r\n);\r\n\r\nexport const addAsync = createAsyncThunk(\r\n    'vacations/add',\r\n    async function ({ destination, from, to, price, description, image }) {\r\n        return await requestJsonWithBody('POST', '/vacation', { destination, from, to, price, description, image });\r\n    },\r\n);\r\n\r\nexport const changeAsync = createAsyncThunk(\r\n    'vacations/change',\r\n    async function ({ id, ...rest }) {\r\n        return await requestJsonWithBody('PATCH', `/vacation/${id}`, rest);\r\n    },\r\n);\r\n\r\nexport const deleteAsync = createAsyncThunk(\r\n    'vacations/delete',\r\n    async function (id) {\r\n        return await requestJson(`/vacation/${id}`, { method: 'DELETE' });\r\n    },\r\n);\r\n\r\nasync function requestJsonWithBody(method, url, rest) {\r\n    return await requestJson(url, {\r\n        method,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(rest),\r\n    });\r\n}\r\n\r\nfunction updateVacation(state, { id, ...rest }) {\r\n    state.loading = false;\r\n    state.error = false;\r\n    const vacation = state.vacations.find(v => v.id === id);\r\n    if (vacation) {\r\n        Object.assign(vacation, { ...rest });\r\n    } else {\r\n        state.vacations.push({ id, ...rest });\r\n    }\r\n}\r\n\r\nconst vacationsSlice = createSlice({\r\n    name: 'vacations',\r\n    initialState: {\r\n        error: false,\r\n        loading: false,\r\n        vacations: [],\r\n    },\r\n    reducers: {\r\n        /**\r\n         * This function is needed to give users immediate feedback when they press the 'Follow' button.\r\n         */\r\n        setFollowing(state, { payload: { id, isFollowing } }) {\r\n            state.error = false;\r\n            const vacation = state.vacations.find(v => v.id === id);\r\n            if (vacation) {\r\n                vacation.isFollowing = isFollowing;\r\n            } else {\r\n                state.error = new Error(`Vacation ID ${id} doesn't exist in the Redux store.`);\r\n            }\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [loadAllAsync.pending](state) {\r\n            state.error = false;\r\n            state.loading = true;\r\n        },\r\n        [loadAllAsync.fulfilled](state, { payload: vacations }) {\r\n            state.loading = false;\r\n            state.error = false;\r\n            state.vacations = vacations;\r\n        },\r\n        [loadAllAsync.rejected](state, { error }) {\r\n            state.loading = false;\r\n            state.error = error;\r\n        },\r\n        [loadOneAsync.pending](state) {\r\n            state.error = false;\r\n            state.loading = true;\r\n        },\r\n        [loadOneAsync.fulfilled](state, { payload: vacation }) {\r\n            updateVacation(state, vacation);\r\n        },\r\n        [loadOneAsync.rejected](state, { error }) {\r\n            state.loading = false;\r\n            state.error = error;\r\n        },\r\n        [addAsync.pending](state) {\r\n            state.error = false;\r\n            state.loading = true;\r\n        },\r\n        [addAsync.fulfilled](state, { payload: vacations }) {\r\n            state.loading = false;\r\n            state.error = false;\r\n            state.vacations = vacations;\r\n        },\r\n        [addAsync.rejected](state, { error }) {\r\n            state.loading = false;\r\n            state.error = error;\r\n        },\r\n        [changeAsync.pending](state) {\r\n            state.error = false;\r\n            state.loading = true;\r\n        },\r\n        [changeAsync.fulfilled](state, { payload: vacation }) {\r\n            updateVacation(state, vacation);\r\n        },\r\n        [changeAsync.rejected](state, { error, meta: { arg: { id, isFollowing } } }) {\r\n            state.loading = false;\r\n            state.error = error;\r\n            if (typeof isFollowing === 'boolean') {\r\n                state.vacations.find(v => v.id === id).isFollowing = !isFollowing;\r\n            }\r\n        },\r\n        [deleteAsync.pending](state) {\r\n            state.error = false;\r\n            state.loading = true;\r\n        },\r\n        [deleteAsync.fulfilled](state, { payload: vacations }) {\r\n            state.loading = false;\r\n            state.error = false;\r\n            state.vacations = vacations;\r\n        },\r\n        [deleteAsync.rejected](state, { error }) {\r\n            state.loading = false;\r\n            state.error = error;\r\n        },\r\n        [logOutAsync.fulfilled](state) {\r\n            state.error = false;\r\n            state.vacations = [];\r\n        },\r\n    }\r\n});\r\n\r\nexport const { setFollowing } = vacationsSlice.actions;\r\n\r\nexport default vacationsSlice.reducer;\r\n\r\n","import { Button, Dialog as MuiDialog, DialogActions, DialogContent, DialogTitle as MuiDialogTitle, IconButton, Typography, withStyles } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React from 'react';\r\n\r\nconst titleStyles = theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n});\r\n\r\nconst DialogTitle = withStyles(titleStyles)(\r\n    function ({ children, classes, onClose, ...other }) {\r\n        return (\r\n            <MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n                <Typography variant=\"h6\">{children}</Typography>\r\n                {onClose && (\r\n                    <IconButton className={classes.closeButton} onClick={onClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                )}\r\n            </MuiDialogTitle>\r\n        );\r\n    }\r\n);\r\n\r\nconst Dialog = function ({ open, title, children, okButtonLabel, onOk, onCancel, classes }) {\r\n    return (\r\n        <MuiDialog open={open}>\r\n            <DialogTitle onClose={onCancel}>\r\n                {title}\r\n            </DialogTitle>\r\n            <DialogContent dividers className={classes.content}>\r\n                {children}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"text\" color=\"primary\" autoFocus className={classes.okButton} onClick={onOk}>\r\n                    {okButtonLabel}\r\n                </Button>\r\n            </DialogActions>\r\n        </MuiDialog>\r\n    );\r\n};\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2),\r\n    },\r\n    content: {\r\n        backgroundColor: '#f5f5f5',\r\n    },\r\n    okButton: {\r\n        color: '#cb2431',\r\n        backgroundColor: '#fff',\r\n        transitionProperty: 'all',\r\n        '&:hover': {\r\n            color: '#fff',\r\n            backgroundColor: '#cb2431',\r\n        },\r\n    },\r\n});\r\n\r\nexport default withStyles(styles)(Dialog);\r\n\r\n","import MomentUtils from '@date-io/moment';\r\nimport { Backdrop, Button, Container, Fab, Grid, LinearProgress, Paper, Snackbar, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography, withStyles } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport Vacation, { defaultVacationProps } from 'components/vacation';\r\nimport { addAsync, changeAsync, deleteAsync, loadAllAsync, setFollowing } from 'features/vacationsSlice';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Dialog from '../components/dialog';\r\n\r\nclass HomePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            add: false,\r\n            idToDelete: 0,\r\n            newVacationProps: { ...defaultVacationProps },\r\n        };\r\n    }\r\n\r\n    openAddDialog() {\r\n        return this.setState({ add: true });\r\n    }\r\n\r\n    closeAddDialog() {\r\n        return this.setState({ add: false });\r\n    }\r\n\r\n    onOkAddDialog() {\r\n        const { addAsync } = this.props;\r\n        const { newVacationProps } = this.state;\r\n        addAsync(newVacationProps);\r\n        return this.closeAddDialog();\r\n    }\r\n\r\n    onChangeFollowing(vacationId, isFollowing) {\r\n        const payload = { id: vacationId, isFollowing };\r\n        const { setFollowing, changeAsync } = this.props;\r\n        setFollowing(payload); // Give the user immediate feedback for the button press.\r\n        changeAsync(payload); // Dispatch an async action that updates the database.\r\n    }\r\n\r\n    onChangeFields(vacationId, fields) {\r\n        const { changeAsync } = this.props;\r\n        changeAsync({ id: vacationId, ...fields });\r\n    }\r\n\r\n    onDelete(vacationId) {\r\n        this.setState({ idToDelete: vacationId });\r\n    }\r\n\r\n    onCancelDelete() {\r\n        this.setState({ idToDelete: 0 });\r\n    }\r\n\r\n    onOkDelete() {\r\n        const { deleteAsync } = this.props;\r\n        const { idToDelete } = this.state;\r\n        this.setState({ idToDelete: 0 });\r\n        deleteAsync(idToDelete);\r\n    }\r\n\r\n    render() {\r\n        const { classes, userRole, vacations, loading, error } = this.props;\r\n        const { add, newVacationProps, idToDelete } = this.state;\r\n        let destinationToDelete = '', startToDelete = '', finishToDelete = '';\r\n        if (idToDelete > 0) {\r\n            (\r\n                {\r\n                    destination: destinationToDelete,\r\n                    from: startToDelete,\r\n                    to: finishToDelete,\r\n                }\r\n                = vacations.find(v => v.id === idToDelete)\r\n            );\r\n        }\r\n        return (\r\n            <Container maxWidth=\"xl\" className={classes.root}>\r\n                <MuiPickersUtilsProvider utils={MomentUtils}>\r\n                    <Grid container spacing={4}>\r\n                        {vacations.map(({ id, ...rest }) => (\r\n                            <Grid item key={id} xs={12} sm={6} md={4} xl={3}>\r\n                                <Vacation\r\n                                    id={id}\r\n                                    {...rest}\r\n                                    userRole={userRole}\r\n                                    onDelete={this.onDelete.bind(this, id)}\r\n                                    onChangeFields={this.onChangeFields.bind(this, id)}\r\n                                    onChangeFollowing={this.onChangeFollowing.bind(this, id)}\r\n                                />\r\n                            </Grid>\r\n                        ))}\r\n                    </Grid>\r\n                    {userRole === 'admin' && (\r\n                        <Fab color=\"primary\" onClick={this.openAddDialog.bind(this)} className={classes.fab}>\r\n                            <AddIcon />\r\n                        </Fab>)\r\n                    }\r\n                    <Dialog\r\n                        open={add}\r\n                        title=\"New Vacation\"\r\n                        okButtonLabel=\"Create\"\r\n                        onOk={this.onOkAddDialog.bind(this)}\r\n                        onCancel={this.closeAddDialog.bind(this)}\r\n                    >\r\n                        <Vacation\r\n                            {...newVacationProps}\r\n                            onChangeFields={fields => {\r\n                                return this.setState({\r\n                                    newVacationProps: {\r\n                                        ...newVacationProps,\r\n                                        ...fields,\r\n                                    },\r\n                                });\r\n                            }}\r\n                        />\r\n                    </Dialog>\r\n                    <Dialog\r\n                        open={idToDelete > 0}\r\n                        title=\"Delete this vacation?\"\r\n                        okButtonLabel=\"Yes, delete\"\r\n                        onOk={this.onOkDelete.bind(this)}\r\n                        onCancel={this.onCancelDelete.bind(this)}\r\n                    >\r\n                        <TableContainer component={Paper}>\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <TableCell component=\"th\" align=\"center\" colSpan={2}>{destinationToDelete}</TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell component=\"th\" scope=\"row\">Start:</TableCell>\r\n                                        <TableCell align=\"right\">{startToDelete}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell component=\"th\" scope=\"row\">Finish:</TableCell>\r\n                                        <TableCell align=\"right\">{finishToDelete}</TableCell>\r\n                                    </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </Dialog>\r\n                    <Backdrop open={loading} className={classes.loadingBackdrop}>\r\n                        <LinearProgress className={classes.progress} />\r\n                    </Backdrop>\r\n                    <Backdrop open={vacations.length === 0} className={classes.emptyBackdrop}>\r\n                        <Typography variant=\"h3\" component=\"h3\">There are no vacations in the system.</Typography>\r\n                        {userRole === 'admin' ?\r\n                            <Button variant=\"outlined\" onClick={this.openAddDialog.bind(this)}>Click here to add some.</Button> :\r\n                            <Typography variant=\"h5\">Please try again later.</Typography>\r\n                        }\r\n                    </Backdrop>\r\n                    <Snackbar open={typeof error?.message === 'string'}>\r\n                        <Alert variant=\"filled\" severity=\"error\" elevation={6}>{error?.message}</Alert>\r\n                    </Snackbar>\r\n                </MuiPickersUtilsProvider>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { vacations, loadAllAsync } = this.props;\r\n        if (!vacations?.length) {\r\n            loadAllAsync();\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        padding: '2rem',\r\n        backgroundColor: '#f5f5f5',\r\n    },\r\n    logout: {\r\n        float: 'right',\r\n    },\r\n    loadingBackdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    fab: {\r\n        position: 'fixed',\r\n        bottom: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n    },\r\n    progress: {\r\n        width: '90%',\r\n    },\r\n    emptyBackdrop: {\r\n        flexDirection: 'column',\r\n    },\r\n});\r\n\r\nconst mapStateToProps = ({\r\n        user: {\r\n            name: username,\r\n            role: userRole,\r\n        },\r\n        vacations: {\r\n            error,\r\n            loading,\r\n            vacations,\r\n        },\r\n}) => ({\r\n        username,\r\n        userRole,\r\n        error,\r\n        loading,\r\n        vacations: [...vacations].sort(({ isFollowing: a }, { isFollowing: b }) => b - a),\r\n});\r\n\r\nconst mapDispatchToProps = { setFollowing, loadAllAsync, addAsync, changeAsync, deleteAsync };\r\n\r\nconst withRedux = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default withRedux(withRouter(withStyles(styles)(HomePage)));\r\n\r\n","import { Button, CircularProgress, Snackbar } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { logInAsync } from 'features/userSlice';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass LoginForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n        };\r\n    }\r\n\r\n    async onSubmit(e) {\r\n        e.preventDefault();\r\n        const { logInAsync, history } = this.props;\r\n        const { username, password } = this.state;\r\n        this.setState({ submitted: true });\r\n        await logInAsync({ username, password });\r\n        history.push('/');\r\n    }\r\n\r\n    onChangeField({ target: { name, value } }) {\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    render() {\r\n        const { classes, loading, error } = this.props;\r\n        const { username, password } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n                <form noValidate autoComplete=\"off\" onSubmit={this.onSubmit.bind(this)}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                        label=\"Username\"\r\n                        value={username}\r\n                        onChange={this.onChangeField.bind(this)} />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        label=\"Password\"\r\n                        value={password}\r\n                        onChange={this.onChangeField.bind(this)}\r\n                    />\r\n                    <Button type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        size=\"large\"\r\n                        disabled={!username || !password || loading}\r\n                    >\r\n                        {loading ? <CircularProgress></CircularProgress> : 'Log In'}\r\n                    </Button>\r\n                </form>\r\n                <Snackbar open={error}>\r\n                    <Alert variant=\"filled\" severity=\"error\" elevation={6}>{error.message}</Alert>\r\n                </Snackbar>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        '& .MuiTextField-root, & .MuiButton-root': {\r\n            margin: theme.spacing(1),\r\n        },\r\n        '& .MuiTextField-root': {\r\n            width: '25ch',\r\n        },\r\n    },\r\n});\r\n\r\nconst withRedux = connect(({ user: { loading, error } }) => ({ loading, error }), { logInAsync });\r\n\r\nexport default withRedux(withRouter(withStyles(styles)(LoginForm)));\r\n\r\n","import { Button, TextField, withStyles } from '@material-ui/core';\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass SignupForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            firstname: '',\r\n            lastname: '',\r\n            username: '',\r\n            password: '',\r\n            password2: '',\r\n            available: true,\r\n            submitted: false,\r\n        };\r\n    }\r\n\r\n    onChange({ target: { name, value } }) {\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    async onSubmit(e) {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true });\r\n        try {\r\n            const { firstname, lastname, username, password } = this.state;\r\n            const body = new URLSearchParams();\r\n            body.set('firstname', firstname);\r\n            body.set('lastname', lastname);\r\n            body.set('username', username);\r\n            body.set('password', password);\r\n            const { status } = await fetch('/user', {\r\n                method: 'POST',\r\n                body,\r\n            });\r\n            if (status === 201) {\r\n                this.setState({\r\n                    firstname: '',\r\n                    lastname: '',\r\n                    username: '',\r\n                    password: '',\r\n                    password2: '',\r\n                });\r\n            }\r\n        } finally {\r\n            this.setState({ submitted: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { firstname, lastname, username, available, password, password2, submitted } = this.state;\r\n        const { classes } = this.props;\r\n        return (\r\n            <form className={classes.root} noValidate autoComplete=\"off\" onSubmit={this.onSubmit.bind(this)}>\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    type=\"text\"\r\n                    name=\"firstname\"\r\n                    label=\"First Name\"\r\n                    helperText={!firstname && 'Required.'}\r\n                    error={!firstname}\r\n                    value={firstname}\r\n                    onChange={this.onChange.bind(this)}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    type=\"text\"\r\n                    name=\"lastname\"\r\n                    label=\"Last Name\"\r\n                    helperText={!lastname && 'Required.'}\r\n                    error={!lastname}\r\n                    value={lastname}\r\n                    onChange={this.onChange.bind(this)}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    type=\"text\"\r\n                    name=\"username\"\r\n                    label=\"Username\"\r\n                    helperText={!username ? 'Required.' : !available && `\"${username}\" is not available.`}\r\n                    error={!username || !available}\r\n                    value={username}\r\n                    onChange={this.onChange.bind(this)}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    label=\"Password\"\r\n                    helperText={!password && 'Required.'}\r\n                    error={!password}\r\n                    value={password}\r\n                    onChange={this.onChange.bind(this)}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    type=\"password\"\r\n                    name=\"password2\"\r\n                    label=\"Repeat Password\"\r\n                    helperText={password !== password2 && 'Passwords don\\'t match.'}\r\n                    error={password !== password2}\r\n                    value={password2}\r\n                    onChange={this.onChange.bind(this)}\r\n                />\r\n                <Button\r\n                    variant=\"contained\"\r\n                    type=\"submit\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    disabled={!firstname || !lastname || !username || !available || !password || password !== password2 || submitted}\r\n                    ref={this.submitButton}\r\n                >Sign Up</Button>\r\n            </form>\r\n        );\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, { username: prevUsername }) {\r\n        const { username } = this.state;\r\n        if (username && username !== prevUsername) {\r\n            const { status } = await fetch(`/user/${username}`, { method: 'HEAD' });\r\n            this.setState({ available: status === 404 });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        '& .MuiTextField-root, & .MuiButton-root': {\r\n            margin: theme.spacing(1),\r\n        },\r\n        '& .MuiTextField-root': {\r\n            width: '25ch',\r\n        },\r\n    },\r\n});\r\n\r\nexport default withRouter(withStyles(styles)(SignupForm));","import Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official';\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Html5Entities } from 'html-entities';\r\n\r\nconst entities = new Html5Entities();\r\n\r\nclass Chart extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n            chartOptions: {\r\n                chart: {\r\n                    type: 'bar'\r\n                },\r\n                title: {\r\n                    text: 'Followers by Vacation',\r\n                },\r\n                xAxis: {\r\n                    categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],\r\n                    title: {\r\n                        text: 'Vacation ID',\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    min: 0,\r\n                    title: {\r\n                        text: null,\r\n                    },\r\n                    labels: {\r\n                        overflow: 'justify'\r\n                    }\r\n                },\r\n                tooltip: {\r\n                },\r\n                plotOptions: {\r\n                    bar: {\r\n                        dataLabels: {\r\n                            enabled: true\r\n                        }\r\n                    }\r\n                },\r\n                legend: {\r\n                },\r\n                credits: {\r\n                    enabled: false\r\n                },\r\n                series: [],\r\n            },\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { vacations } = this.props;\r\n        const { chartOptions } = this.state;\r\n        return (\r\n            vacations?.length > 0\r\n                ? (\r\n                    <HighchartsReact highcharts={Highcharts} options={chartOptions} />)\r\n                : (\r\n                    <h1>No vacation is being followed.</h1>\r\n                )\r\n        );\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { vacations } = this.props;\r\n        this.updateChartOptions(vacations);\r\n    }\r\n\r\n    componentDidUpdate({ vacations: prevVacations }) {\r\n        const { vacations: currVacations } = this.props;\r\n        const xor = _.xor(prevVacations, currVacations);\r\n        if (!_.isEmpty(xor)) {\r\n            this.updateChartOptions(currVacations);\r\n        }\r\n    }\r\n\r\n    updateChartOptions(vacations) {\r\n        const { chartOptions: { xAxis: { categories, ...restXAxis }, series, ...restChartOptions } } = this.state;\r\n        this.setState({\r\n            chartOptions: {\r\n                xAxis: {\r\n                    categories: vacations.map(({ id }) => id),\r\n                    ...restXAxis,\r\n                },\r\n                series: [\r\n                    {\r\n                        name: 'Followers',\r\n                        data: vacations.map(({ destination, from, to, followers }) => ({\r\n                            name: this.formatCategory(destination, from, to),\r\n                            y: followers,\r\n                        })),\r\n                    },\r\n                ],\r\n                ...restChartOptions,\r\n            },\r\n        });\r\n    }\r\n\r\n    formatCategory(destination, from, to) {\r\n        return entities.decode(`${destination}, ${from} &ndash; ${to}`);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ vacations: { vacations } }) => ({ vacations: vacations.filter(({ followers, }) => followers > 0) });\r\n\r\nconst withRedux = connect(mapStateToProps);\r\n\r\nexport default withRedux(Chart);","import './App.css';\r\nimport { AppBar, Button, Container, IconButton, Menu, MenuItem, Toolbar, Typography, withStyles } from '@material-ui/core';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { logInAsync, logOutAsync } from 'features/userSlice';\r\nimport React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { BrowserRouter, Link, Route, Switch } from 'react-router-dom';\r\nimport PrivateRoute from './components/private-route';\r\nimport HomePage from './pages/home-page';\r\nimport LoginForm from './pages/login-form';\r\nimport SignupForm from './pages/signup-form';\r\nimport Chart from 'pages/chart';\r\n\r\nclass App extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      menuAnchorEl: null,\r\n    };\r\n  }\r\n\r\n  onClickMenuButton({ currentTarget }) {\r\n    this.setState({\r\n      menuAnchorEl: currentTarget,\r\n    });\r\n  }\r\n\r\n  onCloseMenu() {\r\n    this.setState({\r\n      menuAnchorEl: null,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { username, userRole, logOutAsync, classes } = this.props;\r\n    const { menuAnchorEl } = this.state;\r\n    return (\r\n      <BrowserRouter>\r\n        <Container maxWidth=\"xl\" className={classes.root}>\r\n          <AppBar position=\"fixed\">\r\n            <Toolbar>\r\n              <IconButton\r\n                edge=\"start\"\r\n                color=\"inherit\"\r\n                disabled={!username}\r\n                onClick={this.onClickMenuButton.bind(this)}\r\n                className={classes.menuButton}\r\n              >\r\n                <MenuIcon />\r\n              </IconButton>\r\n              <Menu anchorEl={menuAnchorEl} open={menuAnchorEl} onClose={this.onCloseMenu.bind(this)}>\r\n                <MenuItem>\r\n                  <Link to=\"/\">Home</Link>\r\n                </MenuItem>\r\n                <MenuItem>\r\n                  <Link to=\"/chart\" disabled={userRole !== 'admin'}>Chart</Link>\r\n                </MenuItem>\r\n              </Menu>\r\n              <Typography variant=\"h6\" className={classes.title}>Vacations</Typography>\r\n              {username ?\r\n                <Button color=\"inherit\" onClick={logOutAsync}>Log Out</Button> :\r\n                <Button color=\"inherit\">Log In</Button>}\r\n            </Toolbar>\r\n          </AppBar>\r\n          {/* Render another <Toolbar> to prevent the <AppBar> from hiding some content. */}\r\n          {/* See https://material-ui.com/components/app-bar/#fixed-placement. */}\r\n          <Toolbar />\r\n          <Switch>\r\n            <Route exact path=\"/signup\">\r\n              <SignupForm />\r\n              <Link to=\"/login\">Already have an account?</Link>\r\n            </Route>\r\n            <Route exact path=\"/login\">\r\n              <LoginForm />\r\n              <Link to=\"/signup\">Don't have an account yet?</Link>\r\n            </Route>\r\n            <PrivateRoute exact path=\"/chart\" component={Chart} />\r\n            <PrivateRoute exact path=\"/\" component={HomePage} />\r\n          </Switch>\r\n        </Container>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  logout: {\r\n    float: 'right',\r\n  },\r\n});\r\n\r\nfunction mapStateToProps({ user: { name: username } }) {\r\n  return { username };\r\n}\r\n\r\nconst mapDispatchToProps = { logInAsync, logOutAsync };\r\n\r\nconst withRedux = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default withRedux(withStyles(styles)(App));\r\n\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport userReducer from 'features/userSlice';\r\nimport vacationsReducer from 'features/vacationsSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    user: userReducer,\r\n    vacations: vacationsReducer,\r\n  },\r\n});\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}