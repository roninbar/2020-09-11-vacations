(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,a){e.exports=a(144)},128:function(e,t,a){},137:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);a(128);var n,r=a(0),o=a.n(r),i=a(13),s=a.n(i),c=a(22),l=a(26),u=a(27),d=a(29),m=a(28),p=(a(137),a(190)),h=a(200),f=a(201),b=a(185),v=a(178),g=a(105),y=a(208),E=a(147),w=a(183),O=a(207),j=a(4),k=a(104),C=a.n(k),x=a(8),A=a(10),D=a.n(A),N=a(18),F=a(23);function S(e,t){return B.apply(this,arguments)}function B(){return(B=Object(N.a)(D.a.mark((function e(t,a){var n,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,r=n.status,o=n.statusText,!(200<=r&&r<300)){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:throw new Error("".concat(r," ").concat(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=Object(F.b)("user/signup",function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n,r,o,i,s,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r=t.firstName,o=t.lastName,(i=new URLSearchParams).set("username",a),i.set("password",n),i.set("firstName",r),i.set("lastName",o),e.next=8,fetch("/api/user",{method:"POST",body:i});case 8:if(s=e.sent,c=s.status,l=s.statusText,!(200<=c&&c<300)){e.next=15;break}return e.abrupt("return",{status:c,statusText:l});case 15:throw new Error("".concat(c," ").concat(l));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(F.b)("user/login",function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,(r=new URLSearchParams).set("username",a),r.set("password",n),e.next=6,S("/api/user/login",{method:"POST",body:r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(F.b)("user/logout",Object(N.a)(D.a.mark((function e(){var t,a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/logout",{method:"POST"});case 2:if(t=e.sent,a=t.status,n=t.statusText,!(200<=a&&a<300)){e.next=9;break}return e.abrupt("return",n);case 9:throw new Error("".concat(a," ").concat(n));case 10:case"end":return e.stop()}}),e)}))));function L(e){e.id=0,e.name="",e.role="",e.firstName="",e.lastName=""}var M=Object(F.c)({name:"user",initialState:{loading:!1,error:!1,id:0,name:"",role:"",firstName:"",lastName:""},extraReducers:(n={},Object(x.a)(n,T.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(n,T.fulfilled,(function(e){e.loading=!1,e.error=!1})),Object(x.a)(n,T.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(x.a)(n,P.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(n,P.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,Object.assign(e,a)})),Object(x.a)(n,P.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a,L(e)})),Object(x.a)(n,R.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(n,R.fulfilled,(function(e){e.loading=!1,e.error=!1,L(e)})),Object(x.a)(n,R.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),n)}).reducer,U=a(37),W=a(16),I=a(32);var q=Object(c.b)((function(e){return{username:e.user.name}}),null)((function(e){var t=e.username,a=e.component,n=Object(I.a)(e,["username","component"]);return o.a.createElement(W.b,Object.assign({},n,{render:function(e){return t?o.a.createElement(a,e):o.a.createElement(W.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))})),V=a(30),z=a(95),H=a(191),K=a(192),G=a(193),J=a(80),Z=a(194),$=a(195),Q=a(196),Y=a(197),X=a(198),_=a(148),ee=a(199),te=a(102),ae=a.n(te),ne=a(206),re=a(20),oe=a(174),ie=a(203),se=a(176),ce=a(177),le=a(179),ue=a(205),de=a(186),me=a(187),pe=a(100),he=a.n(pe),fe=a(78),be=a.n(fe),ve=a(188),ge=a(202),ye=a(69),Ee=a(63),we=a.n(Ee),Oe=(a(68),new ye.Html5Entities),je=Object(j.a)({form:{flexGrow:1,display:"flex",flexFlow:"row nowrap"}})((function(e){var t=e.classes,a=e.onSubmit,n=e.onClickAway,r=Object(I.a)(e,["classes","onSubmit","onClickAway"]);return o.a.createElement(oe.a,{onClickAway:n},o.a.createElement("form",{className:t.form,onSubmit:a},o.a.createElement(ie.a,Object.assign({fullWidth:!0},r))))})),ke=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editing:"nothing",fields:{}},e}return Object(u.a)(a,[{key:"quitEditing",value:function(){this.setState({fields:{},editing:"nothing"})}},{key:"onClickEditButton",value:function(e){this.setState({editing:e})}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setField(a,n)}},{key:"onChangeDate",value:function(e,t,a){this.setField(e,a)}},{key:"onAcceptDate",value:function(e,t){this.setField(e,t.format("yyyy-MM-DD"))}},{key:"setField",value:function(e,t){var a=this.state.fields;this.setState({fields:Object(V.a)(Object(V.a)({},a),{},Object(x.a)({},e,t))})}},{key:"onSubmitTextField",value:function(e){e.preventDefault(),this.fireChangeFields()}},{key:"onSubmitDates",value:function(e){e.preventDefault(),this.fireChangeFields()}},{key:"onKeyUp",value:function(e){"Escape"===e.key&&this.quitEditing()}},{key:"onClickAway",value:function(){this.fireChangeFields()}},{key:"fireChangeFields",value:function(){var e=this.state.fields;we.a.isEmpty(e)||(0,this.props.onChangeFields)(e);this.quitEditing()}},{key:"onBlur",value:function(e,t){var a=t.target.innerText,n=this.props,r=n.onChangeFields;if(a!==n[e])return r(Object(x.a)({},e,a))}},{key:"onBlurDestination",value:function(e){this.fireChangeFields()}},{key:"render",value:function(){var e,t,a,n,r,i,s=this.props,c=s.id,l=s.destination,u=s.from,d=s.to,m=s.price,p=s.description,h=s.image,f=s.followers,b=s.isFollowing,g=s.onChangeFollowing,y=s.onDelete,O=s.userRole,j=s.classes,k=this.state.editing;return o.a.createElement(se.a,{className:j.root},o.a.createElement(ce.a,{className:j.media+("image"===k?" editing":""),image:h,title:l},"admin"===O&&o.a.createElement("div",{className:"overlay"},"image"===k?o.a.createElement(je,{variant:"outlined",autoFocus:!0,type:"text",name:"image",value:"string"===typeof(null===(e=this.state.fields)||void 0===e?void 0:e.image)?null===(t=this.state.fields)||void 0===t?void 0:t.image:h,onChange:this.onChange.bind(this),onSubmit:this.onSubmitTextField.bind(this),onClickAway:this.onClickAway.bind(this),onKeyUp:this.onKeyUp.bind(this),inputProps:{pattern:"^(?:([A-Za-z]+):)?(\\/{0,3})([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$"},className:j.imageEditTextField}):o.a.createElement(v.a,{className:j.imageEditButton,onClick:this.onClickEditButton.bind(this,"image")},o.a.createElement(be.a,null)))),o.a.createElement(le.a,null,"destination"===k?o.a.createElement(je,{variant:"outlined",name:"destination",value:"string"===typeof(null===(a=this.state.fields)||void 0===a?void 0:a.destination)?null===(n=this.state.fields)||void 0===n?void 0:n.destination:l,onChange:this.onChange.bind(this),onSubmit:this.onSubmitTextField.bind(this),onClickAway:this.onClickAway.bind(this),onKeyUp:this.onKeyUp.bind(this),onBlur:this.onBlurDestination.bind(this),autoFocus:!0}):o.a.createElement(E.a,{className:j.contentRow,variant:"h5",gutterBottom:!0},l,"admin"===O&&"nothing"===k&&o.a.createElement("div",{className:"overlay"},o.a.createElement(v.a,{onClick:this.onClickEditButton.bind(this,"destination")},o.a.createElement(be.a,null)))),"dates"===k?o.a.createElement(oe.a,{onClickAway:this.onClickAway.bind(this)},o.a.createElement("form",{onSubmit:this.onSubmitDates.bind(this),className:j.datesForm},o.a.createElement(ge.a,{disablePast:!0,disableToolbar:!0,variant:"inline",format:"yyyy-MM-DD",margin:"normal",label:"Start Date",name:"from",value:(null===(r=this.state.fields)||void 0===r?void 0:r.from)||u,onChange:this.onChangeDate.bind(this,"from"),onAccept:this.onAcceptDate.bind(this,"from")}),o.a.createElement(ge.a,{disablePast:!0,disableToolbar:!0,variant:"inline",format:"yyyy-MM-DD",margin:"normal",label:"End Date",name:"to",value:(null===(i=this.state.fields)||void 0===i?void 0:i.to)||d,onChange:this.onChangeDate.bind(this,"to"),onAccept:this.onAcceptDate.bind(this,"to")}),o.a.createElement(w.a,{type:"submit"},"Update"))):o.a.createElement(E.a,{className:j.contentRow,variant:"subtitle1",gutterBottom:!0},o.a.createElement(ue.a,{fontWeight:"fontWeightBold",onBlur:this.onBlur.bind(this,"dates")},Oe.decode("".concat(u," &ndash; ").concat(d))),"admin"===O&&"nothing"===k&&o.a.createElement("div",{className:"overlay"},o.a.createElement(v.a,{onClick:this.onClickEditButton.bind(this,"dates")},o.a.createElement(be.a,null)))),o.a.createElement(E.a,{className:j.contentRow,variant:"body1",gutterBottom:!0,component:"div",contentEditable:"admin"===O,suppressContentEditableWarning:!0,onBlur:this.onBlur.bind(this,"description")},p),o.a.createElement(E.a,{variant:"h6"},o.a.createElement(ue.a,{fontWeight:"fontWeightBold"},"\u20ac",o.a.createElement("span",{contentEditable:"admin"===O,suppressContentEditableWarning:!0,onBlur:this.onBlur.bind(this,"price"),className:j.contentRow},m)))),o.a.createElement(de.a,{className:j.actions},"user"===O&&o.a.createElement(me.a,{badgeContent:f,color:"primary"},o.a.createElement(ve.a,{value:"check",selected:Boolean(b),onChange:function(){return g(!b)}},o.a.createElement(E.a,{variant:"button"},"Follow"))),"admin"===O&&c>0&&o.a.createElement(v.a,{onClick:y},o.a.createElement(he.a,null))))}}]),a}(r.PureComponent),Ce={id:0,destination:"New Destination",from:"2021-01-01",to:"2021-01-07",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Labore consequuntur assumenda aspernatur dolore voluptatum nesciunt doloremque velit officia eius quia! Laudantium facere similique fugiat pariatur est. Quod repudiandae eveniet nihil.",price:0,image:"/images/airplane.png",followers:0,isFollowing:!1,userRole:"admin"};ke.defaultProps=Ce;var xe,Ae=Object(j.a)({root:{},media:{height:140,position:"relative",backgroundSize:function(e){return e.image.endsWith("airplane.png")?"contain":"default"},"& .overlay":{display:"flex",flexFlow:"row-reverse nowrap",position:"absolute",right:0,bottom:0,left:0,opacity:0,backgroundColor:"black"},"&:hover .overlay":{opacity:.5},"&.editing .overlay":{opacity:1}},imageEditTextField:{backgroundColor:"white"},imageEditButton:{color:"rgba(255, 255, 255, 1.0)"},contentRow:{position:"relative",outlineColor:"#3f51b5","& .overlay":{display:"none",flexDirection:"row-reverse",position:"absolute",right:0,bottom:0,left:0},"&:hover .overlay":{display:"flex"}},datesForm:{display:"flex",flexDirection:"column",alignItems:"center",outline:"2px solid #3f51b5",outlineRadius:"4px"},actions:{flexDirection:function(e){return"admin"===e.userRole?"row-reverse":"row"}}})(ke);var De=Object(F.b)("vacations/loadAll",Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("/api/vacation/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Ne=Object(F.b)("vacations/loadOne",function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("/api/vacation/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(F.b)("vacations/add",function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n,r,o,i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.destination,n=t.from,r=t.to,o=t.price,i=t.description,s=t.image,e.next=3,Te("POST","/api/vacation",{destination:a,from:n,to:r,price:o,description:i,image:s});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se=Object(F.b)("vacations/change",function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=Object(I.a)(t,["id"]),e.next=3,Te("PATCH","/api/vacation/".concat(a),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Be=Object(F.b)("vacations/delete",function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("/api/vacation/".concat(t),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Te(e,t,a){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(N.a)(D.a.mark((function e(t,a,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(a,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){var a=t.id,n=Object(I.a)(t,["id"]);e.loading=!1,e.error=!1;var r=e.vacations.find((function(e){return e.id===a}));r?Object.assign(r,Object(V.a)({},n)):e.vacations.push(Object(V.a)({id:a},n))}var Le=Object(F.c)({name:"vacations",initialState:{loading:!1,error:!1,vacations:[]},reducers:{setFollowing:function(e,t){var a=t.payload,n=a.id,r=a.isFollowing;e.error=!1;var o=e.vacations.find((function(e){return e.id===n}));o?o.isFollowing=r:e.error=new Error("Vacation ID ".concat(n," doesn't exist in the Redux store."))}},extraReducers:(xe={},Object(x.a)(xe,De.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(xe,De.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(x.a)(xe,De.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(x.a)(xe,Ne.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(xe,Ne.fulfilled,(function(e,t){Re(e,t.payload)})),Object(x.a)(xe,Ne.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(x.a)(xe,Fe.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(xe,Fe.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(x.a)(xe,Fe.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(x.a)(xe,Se.pending,(function(e,t){var a=t.meta.arg.showLoading;e.error=!1,e.loading=Boolean(a)})),Object(x.a)(xe,Se.fulfilled,(function(e,t){Re(e,t.payload)})),Object(x.a)(xe,Se.rejected,(function(e,t){var a=t.error,n=t.meta.arg,r=n.id,o=n.isFollowing;e.loading=!1,e.error=a,"boolean"===typeof o&&(e.vacations.find((function(e){return e.id===r})).isFollowing=!o)})),Object(x.a)(xe,Be.pending,(function(e){e.error=!1,e.loading=!0})),Object(x.a)(xe,Be.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(x.a)(xe,Be.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(x.a)(xe,R.fulfilled,(function(e){e.error=!1,e.vacations=[]})),xe)}),Me=Le.actions.setFollowing,Ue=Le.reducer,We=a(189),Ie=a(180),qe=a(181),Ve=a(182),ze=a(101),He=a.n(ze),Ke=Object(j.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(I.a)(e,["children","classes","onClose"]);return o.a.createElement(We.a,Object.assign({disableTypography:!0,className:a.root},r),o.a.createElement(E.a,{variant:"h6"},t),n&&o.a.createElement(v.a,{className:a.closeButton,onClick:n},o.a.createElement(He.a,null)))})),Ge=Object(j.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},content:{backgroundColor:"#f5f5f5"},okButton:{color:"#cb2431",backgroundColor:"#fff",transitionProperty:"all","&:hover":{color:"#fff",backgroundColor:"#cb2431"}}}}))((function(e){var t=e.open,a=e.title,n=e.children,r=e.okButtonLabel,i=e.onOk,s=e.onCancel,c=e.classes;return o.a.createElement(Ie.a,{open:t},o.a.createElement(Ke,{onClose:s},a),o.a.createElement(qe.a,{dividers:!0,className:c.content},n),o.a.createElement(Ve.a,null,o.a.createElement(w.a,{variant:"text",color:"primary",autoFocus:!0,className:c.okButton,onClick:i},r)))})),Je=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={add:!1,idToDelete:0,newVacationProps:Object(V.a)({},Ce)},e}return Object(u.a)(a,[{key:"openAddDialog",value:function(){return this.setState({add:!0})}},{key:"closeAddDialog",value:function(){return this.setState({add:!1})}},{key:"onOkAddDialog",value:function(){return(0,this.props.addAsync)(this.state.newVacationProps),this.closeAddDialog()}},{key:"onChangeFollowing",value:function(e,t){var a={id:e,isFollowing:t,showLoading:!1},n=this.props,r=n.setFollowing,o=n.changeAsync;r(a),o(a)}},{key:"onChangeFields",value:function(e,t){(0,this.props.changeAsync)(Object(V.a)(Object(V.a)({id:e},t),{},{showLoading:!0}))}},{key:"onDelete",value:function(e){this.setState({idToDelete:e})}},{key:"onCancelDelete",value:function(){this.setState({idToDelete:0})}},{key:"onOkDelete",value:function(){var e=this.props.deleteAsync,t=this.state.idToDelete;this.setState({idToDelete:0}),e(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.userRole,r=t.vacations,i=t.loading,s=t.error,c=this.state,l=c.add,u=c.newVacationProps,d=c.idToDelete,m="",h="",f="";if(d>0){var b=r.find((function(e){return e.id===d}));m=b.destination,h=b.from,f=b.to}return o.a.createElement(p.a,{maxWidth:"xl",className:a.root},o.a.createElement(re.a,{utils:z.a},o.a.createElement(H.a,{container:!0,spacing:4},r.map((function(t){var a=t.id,r=Object(I.a)(t,["id"]);return o.a.createElement(H.a,{item:!0,key:a,xs:12,sm:6,md:4,xl:3},o.a.createElement(Ae,Object.assign({id:a},r,{userRole:n,onDelete:e.onDelete.bind(e,a),onChangeFields:e.onChangeFields.bind(e,a),onChangeFollowing:e.onChangeFollowing.bind(e,a)})))}))),"admin"===n&&o.a.createElement(K.a,{color:"primary",onClick:this.openAddDialog.bind(this),className:a.fab},o.a.createElement(ae.a,null)),o.a.createElement(Ge,{open:l,title:"New Vacation",okButtonLabel:"Create",onOk:this.onOkAddDialog.bind(this),onCancel:this.closeAddDialog.bind(this)},o.a.createElement(Ae,Object.assign({},u,{onChangeFields:function(t){return e.setState({newVacationProps:Object(V.a)(Object(V.a)({},u),t)})}}))),o.a.createElement(Ge,{open:d>0,title:"Delete this vacation?",okButtonLabel:"Yes, delete",onOk:this.onOkDelete.bind(this),onCancel:this.onCancelDelete.bind(this)},o.a.createElement(G.a,{component:J.a},o.a.createElement(Z.a,null,o.a.createElement($.a,null,o.a.createElement(Q.a,null,o.a.createElement(Y.a,{component:"th",align:"center",colSpan:2},m))),o.a.createElement(X.a,null,o.a.createElement(Q.a,null,o.a.createElement(Y.a,{component:"th",scope:"row"},"Start:"),o.a.createElement(Y.a,{align:"right"},h)),o.a.createElement(Q.a,null,o.a.createElement(Y.a,{component:"th",scope:"row"},"Finish:"),o.a.createElement(Y.a,{align:"right"},f)))))),o.a.createElement(_.a,{open:i,className:a.loadingBackdrop},o.a.createElement(ee.a,{className:a.progress})),o.a.createElement(_.a,{open:0===r.length,className:a.emptyBackdrop},o.a.createElement(E.a,{variant:"h3",component:"h3"},"There are no vacations in the system."),"admin"===n?o.a.createElement(w.a,{variant:"outlined",onClick:this.openAddDialog.bind(this)},"Click here to add some."):o.a.createElement(E.a,{variant:"h5"},"Please try again later.")),o.a.createElement(O.a,{open:"string"===typeof(null===s||void 0===s?void 0:s.message)},o.a.createElement(ne.a,{variant:"filled",severity:"error",elevation:6},null===s||void 0===s?void 0:s.message))))}},{key:"componentDidMount",value:function(){var e=Object(N.a)(D.a.mark((function e(){var t,a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.vacations,n=t.loadAllAsync,(null===a||void 0===a?void 0:a.length)||n();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(r.Component),Ze={setFollowing:Me,loadAllAsync:De,addAsync:Fe,changeAsync:Se,deleteAsync:Be},$e=Object(c.b)((function(e){var t=e.user,a=t.name,n=t.role,r=e.vacations;return{username:a,userRole:n,error:r.error,loading:r.loading,vacations:r.vacations}}),Ze)(Object(W.g)(Object(j.a)((function(e){return{root:{padding:"2rem",backgroundColor:"#f5f5f5"},logout:{float:"right"},loadingBackdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},progress:{width:"90%"},emptyBackdrop:{flexDirection:"column"}}}))(Je))),Qe=a(184),Ye=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e}return Object(u.a)(a,[{key:"onSubmit",value:function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n,r,o,i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.logInAsync,r=a.history,o=this.state,i=o.username,s=o.password,e.next=5,n({username:i,password:s});case 5:r.push("/");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChangeField",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.classes,n=this.state,r=n.username,i=n.password;return o.a.createElement(p.a,{maxWidth:"xs",className:a.root},o.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit.bind(this),className:a.form},o.a.createElement(ie.a,{variant:"outlined",type:"text",name:"username",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",autoFocus:!0,value:r,onChange:this.onChangeField.bind(this)}),o.a.createElement(ie.a,{variant:"outlined",type:"password",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",id:"password",value:i,onChange:this.onChangeField.bind(this)}),o.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:!r||!i||t,className:a.submit},t?o.a.createElement(Qe.a,null):"Log In"),o.a.createElement(H.a,{container:!0},o.a.createElement(H.a,{item:!0},o.a.createElement(U.c,{to:"/signup"},"Don't have an account? Sign Up")))))}}]),a}(r.Component),Xe=Object(c.b)((function(e){return{loading:e.user.loading}}),{logInAsync:P})(Object(W.g)(Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(Ye))),_e=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",username:"",password:"",password2:"",available:!0,submitted:!1},e}return Object(u.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"onSubmit",value:function(){var e=Object(N.a)(D.a.mark((function e(t){var a,n,r,o,i,s,c,l,u,d;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.signUpAsync,r=a.logInAsync,o=a.history,i=this.state,s=i.username,c=i.password,l=i.firstName,u=i.lastName,e.next=5,n({username:s,password:c,firstName:l,lastName:u});case 5:if(d=e.sent,201!==d.payload.status){e.next=11;break}return e.next=10,r({username:s,password:c});case 10:o.push("/");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.username,r=e.available,i=e.password,s=e.password2,c=e.submitted,l=this.props.classes;return o.a.createElement("form",{className:l.root,noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit.bind(this)},o.a.createElement(ie.a,{variant:"outlined",type:"text",name:"firstName",label:"First Name",helperText:!t&&"Required.",error:!t,value:t,onChange:this.onChange.bind(this)}),o.a.createElement(ie.a,{variant:"outlined",type:"text",name:"lastName",label:"Last Name",helperText:!a&&"Required.",error:!a,value:a,onChange:this.onChange.bind(this)}),o.a.createElement(ie.a,{variant:"outlined",type:"text",name:"username",label:"Username",helperText:n?!r&&'"'.concat(n,'" is not available.'):"Required.",error:!n||!r,value:n,onChange:this.onChange.bind(this)}),o.a.createElement(ie.a,{variant:"outlined",type:"password",name:"password",label:"Password",helperText:!i&&"Required.",error:!i,value:i,onChange:this.onChange.bind(this)}),o.a.createElement(ie.a,{variant:"outlined",type:"password",name:"password2",label:"Repeat Password",helperText:i!==s&&"Passwords don't match.",error:i!==s,value:s,onChange:this.onChange.bind(this)}),o.a.createElement(w.a,{variant:"contained",type:"submit",color:"primary",size:"large",disabled:!t||!a||!n||!r||!i||i!==s||c,ref:this.submitButton},"Sign Up"))}},{key:"componentDidUpdate",value:function(){var e=Object(N.a)(D.a.mark((function e(t,a){var n,r,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.username,!(r=this.state.username)||r===n){e.next=8;break}return e.next=5,fetch("/api/user/".concat(r),{method:"HEAD"});case 5:o=e.sent,i=o.status,this.setState({available:404===i});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(r.Component),et=Object(c.b)(null,{signUpAsync:T,logInAsync:P})(Object(W.g)(Object(j.a)((function(e){return{root:{"& .MuiTextField-root, & .MuiButton-root":{margin:e.spacing(1)},"& .MuiTextField-root":{width:"25ch"}}}}))(_e))),tt=a(83),at=a.n(tt),nt=a(103),rt=a.n(nt),ot=new ye.Html5Entities,it=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={chartOptions:{chart:{type:"bar"},title:{text:"Followers by Vacation"},xAxis:{categories:[],title:{text:"Vacation ID"}},yAxis:{min:0,title:{text:null},labels:{overflow:"justify"}},tooltip:{},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{},credits:{enabled:!1},series:[]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.vacations,t=this.state.chartOptions;return(null===e||void 0===e?void 0:e.length)>0?o.a.createElement(rt.a,{highcharts:at.a,options:t}):o.a.createElement("h1",null,"No vacation is being followed.")}},{key:"componentDidMount",value:function(){var e=this.props.vacations;this.updateChartOptions(e)}},{key:"componentDidUpdate",value:function(e){var t=e.vacations,a=this.props.vacations,n=we.a.xor(t,a);we.a.isEmpty(n)||this.updateChartOptions(a)}},{key:"updateChartOptions",value:function(e){var t=this;this.setState({chartOptions:{xAxis:{categories:e.map((function(e){return e.id}))},series:[{name:"Followers",data:e.map((function(e){var a=e.destination,n=e.from,r=e.to,o=e.followers;return{name:t.formatCategory(a,n,r),y:o}}))}]}})}},{key:"formatCategory",value:function(e,t,a){return ot.decode("".concat(e,", ").concat(t," &ndash; ").concat(a))}}]),a}(r.Component),st=Object(c.b)((function(e){return{vacations:e.vacations.vacations.filter((function(e){return e.followers>0}))}}))(it),ct=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={menuAnchorEl:null},e}return Object(u.a)(a,[{key:"onClickMenuButton",value:function(e){var t=e.currentTarget;this.setState({menuAnchorEl:t})}},{key:"onCloseMenu",value:function(){this.setState({menuAnchorEl:null})}},{key:"render",value:function(){var e,t,a=this.props,n=a.user,r=a.vacations,i=a.logOutAsync,s=a.classes,c=this.state.menuAnchorEl;return o.a.createElement(U.a,null,o.a.createElement(p.a,{maxWidth:"xl",className:s.root},o.a.createElement(h.a,null),o.a.createElement(f.a,{position:"fixed"},o.a.createElement(b.a,null,o.a.createElement(v.a,{edge:"start",color:"inherit",disabled:!n.name,onClick:this.onClickMenuButton.bind(this),className:s.menuButton},o.a.createElement(C.a,null)),o.a.createElement(g.a,{anchorEl:c,open:Boolean(c),onClose:this.onCloseMenu.bind(this)},o.a.createElement(y.a,null,o.a.createElement(U.b,{to:"/"},"Home")),o.a.createElement(y.a,null,o.a.createElement(U.b,{to:"/chart",disabled:"admin"!==n.role},"Chart"))),o.a.createElement(E.a,{variant:"h6",className:s.title},"Vacations"),n.name?o.a.createElement(w.a,{color:"inherit",onClick:i},"Log Out"):o.a.createElement(w.a,{color:"inherit"},"Log In"))),o.a.createElement(b.a,null),o.a.createElement(W.d,null,o.a.createElement(W.b,{exact:!0,path:"/signup"},o.a.createElement(et,null),o.a.createElement(U.b,{to:"/login"},"Already have an account?")),o.a.createElement(W.b,{exact:!0,path:"/login",component:Xe}),o.a.createElement(q,{exact:!0,path:"/chart",component:st}),o.a.createElement(q,{exact:!0,path:"/",component:$e})),o.a.createElement(O.a,{open:Boolean(n.error||r.error)},o.a.createElement(ne.a,{variant:"filled",severity:"error",elevation:6},(null===(e=n.error)||void 0===e?void 0:e.message)||(null===(t=r.error)||void 0===t?void 0:t.message)))))}}]),a}(r.PureComponent);var lt={logInAsync:P,logOutAsync:R},ut=Object(c.b)((function(e){return{user:e.user,vacations:e.vacations}}),lt)(Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logout:{float:"right"}}}))(ct)),dt=Object(F.a)({reducer:{user:M,vacations:Ue}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.a,{store:dt},o.a.createElement(ut,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[127,1,2]]]);
//# sourceMappingURL=main.68d9dd96.chunk.js.map