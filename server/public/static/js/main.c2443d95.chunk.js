(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,a){e.exports=a(145)},129:function(e,t,a){},138:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);a(129);var n,r=a(0),i=a.n(r),o=a(13),s=a.n(o),c=a(29),l=a(27),u=a(28),d=a(31),m=a(30),h=(a(138),a(191)),p=a(201),f=a(186),b=a(179),v=a(106),g=a(208),y=a(148),E=a(184),O=a(4),w=a(104),j=a.n(w),k=a(9),C=a(11),x=a.n(C),D=a(18),A=a(26);function F(e,t){return S.apply(this,arguments)}function S(){return(S=Object(D.a)(x.a.mark((function e(t,a){var n,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,r=n.status,i=n.statusText,!(200<=r&&r<300)){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:throw new Error("".concat(r," ").concat(i));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=Object(A.b)("user/login",function(){var e=Object(D.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,(r=new URLSearchParams).set("username",a),r.set("password",n),e.next=6,F("/user/login",{method:"POST",body:r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(A.b)("user/logout",Object(D.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/logout",{method:"POST"});case 2:if(t=e.sent,a=t.status,n=t.statusText,!(200<=a&&a<300)){e.next=9;break}return e.abrupt("return",n);case 9:throw new Error("".concat(a," ").concat(n));case 10:case"end":return e.stop()}}),e)}))));function N(e){e.id=0,e.name="",e.role=""}var R=Object(A.c)({name:"user",initialState:{error:!1,id:0,name:"",role:""},extraReducers:(n={},Object(k.a)(n,B.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(n,B.fulfilled,(function(e,t){var a=t.payload,n=a.id,r=a.name,i=a.role;e.loading=!1,e.error=!1,e.id=n,e.name=r,e.role=i})),Object(k.a)(n,B.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a,N(e)})),Object(k.a)(n,T.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(n,T.fulfilled,(function(e){e.loading=!1,e.error=!1,N(e)})),Object(k.a)(n,T.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),n)}).reducer,P=a(37),M=a(16),L=a(22);var U=Object(c.b)((function(e){return{username:e.user.name}}),null)((function(e){var t=e.username,a=e.component,n=Object(L.a)(e,["username","component"]);return i.a.createElement(M.b,Object.assign({},n,{render:function(e){return t?i.a.createElement(a,e):i.a.createElement(M.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))})),W=a(105),q=a(23),I=a(95),V=a(192),z=a(193),H=a(194),K=a(80),G=a(195),J=a(196),Z=a(197),$=a(198),Q=a(199),Y=a(149),X=a(200),_=a(207),ee=a(102),te=a.n(ee),ae=a(206),ne=a(20),re=a(175),ie=a(203),oe=a(177),se=a(178),ce=a(180),le=a(205),ue=a(187),de=a(188),me=a(100),he=a.n(me),pe=a(78),fe=a.n(pe),be=a(189),ve=a(202),ge=a(69),ye=a(63),Ee=a.n(ye),Oe=(a(68),new ge.Html5Entities),we=Object(O.a)({form:{flexGrow:1,display:"flex",flexFlow:"row nowrap"}})((function(e){var t=e.classes,a=e.onSubmit,n=e.onClickAway,r=Object(L.a)(e,["classes","onSubmit","onClickAway"]);return i.a.createElement(re.a,{onClickAway:n},i.a.createElement("form",{className:t.form,onSubmit:a},i.a.createElement(ie.a,Object.assign({fullWidth:!0},r))))})),je=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={editing:"nothing",fields:{}},n}return Object(u.a)(a,[{key:"quitEditing",value:function(){this.setState({fields:{},editing:"nothing"})}},{key:"onClickEditButton",value:function(e){this.setState({editing:e})}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setField(a,n)}},{key:"onChangeDate",value:function(e,t,a){this.setField(e,a)}},{key:"onAcceptDate",value:function(e,t){this.setField(e,t.format("yyyy-MM-DD"))}},{key:"setField",value:function(e,t){var a=this.state.fields;this.setState({fields:Object(q.a)(Object(q.a)({},a),{},Object(k.a)({},e,t))})}},{key:"onSubmitTextField",value:function(e){e.preventDefault(),this.fireChangeFields()}},{key:"onSubmitDates",value:function(e){e.preventDefault(),this.fireChangeFields()}},{key:"onKeyUp",value:function(e){"Escape"===e.key&&this.quitEditing()}},{key:"onClickAway",value:function(){this.fireChangeFields()}},{key:"fireChangeFields",value:function(){var e=this.state.fields;Ee.a.isEmpty(e)||(0,this.props.onChangeFields)(e);this.quitEditing()}},{key:"onBlur",value:function(e,t){var a=t.target.innerText,n=this.props,r=n.onChangeFields;if(a!==n[e])return r(Object(k.a)({},e,a))}},{key:"onBlurDestination",value:function(e){this.fireChangeFields()}},{key:"render",value:function(){var e,t,a,n,r,o,s=this.props,c=s.id,l=s.destination,u=s.from,d=s.to,m=s.price,h=s.description,p=s.image,f=s.followers,v=s.isFollowing,g=s.onChangeFollowing,O=s.onDelete,w=s.userRole,j=s.classes,k=this.state.editing;return i.a.createElement(oe.a,{className:j.root},i.a.createElement(se.a,{className:j.media+("image"===k?" editing":""),image:p,title:l},"admin"===w&&i.a.createElement("div",{className:"overlay"},"image"===k?i.a.createElement(we,{variant:"outlined",autoFocus:!0,type:"text",name:"image",value:"string"===typeof(null===(e=this.state.fields)||void 0===e?void 0:e.image)?null===(t=this.state.fields)||void 0===t?void 0:t.image:p,onChange:this.onChange.bind(this),onSubmit:this.onSubmitTextField.bind(this),onClickAway:this.onClickAway.bind(this),onKeyUp:this.onKeyUp.bind(this),inputProps:{pattern:"^(?:([A-Za-z]+):)?(\\/{0,3})([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$"},className:j.imageEditTextField}):i.a.createElement(b.a,{className:j.imageEditButton,onClick:this.onClickEditButton.bind(this,"image")},i.a.createElement(fe.a,null)))),i.a.createElement(ce.a,null,"destination"===k?i.a.createElement(we,{variant:"outlined",name:"destination",value:"string"===typeof(null===(a=this.state.fields)||void 0===a?void 0:a.destination)?null===(n=this.state.fields)||void 0===n?void 0:n.destination:l,onChange:this.onChange.bind(this),onSubmit:this.onSubmitTextField.bind(this),onClickAway:this.onClickAway.bind(this),onKeyUp:this.onKeyUp.bind(this),onBlur:this.onBlurDestination.bind(this),autoFocus:!0}):i.a.createElement(y.a,{className:j.contentRow,variant:"h5",gutterBottom:!0},l,"admin"===w&&"nothing"===k&&i.a.createElement("div",{className:"overlay"},i.a.createElement(b.a,{onClick:this.onClickEditButton.bind(this,"destination")},i.a.createElement(fe.a,null)))),"dates"===k?i.a.createElement(re.a,{onClickAway:this.onClickAway.bind(this)},i.a.createElement("form",{onSubmit:this.onSubmitDates.bind(this),className:j.datesForm},i.a.createElement(ve.a,{disablePast:!0,disableToolbar:!0,variant:"inline",format:"yyyy-MM-DD",margin:"normal",label:"Start Date",name:"from",value:(null===(r=this.state.fields)||void 0===r?void 0:r.from)||u,onChange:this.onChangeDate.bind(this,"from"),onAccept:this.onAcceptDate.bind(this,"from")}),i.a.createElement(ve.a,{disablePast:!0,disableToolbar:!0,variant:"inline",format:"yyyy-MM-DD",margin:"normal",label:"End Date",name:"to",value:(null===(o=this.state.fields)||void 0===o?void 0:o.to)||d,onChange:this.onChangeDate.bind(this,"to"),onAccept:this.onAcceptDate.bind(this,"to")}),i.a.createElement(E.a,{type:"submit"},"Update"))):i.a.createElement(y.a,{className:j.contentRow,variant:"subtitle1",gutterBottom:!0},i.a.createElement(le.a,{fontWeight:"fontWeightBold",onBlur:this.onBlur.bind(this,"dates")},Oe.decode("".concat(u,"&ndash;").concat(d))),"admin"===w&&"nothing"===k&&i.a.createElement("div",{className:"overlay"},i.a.createElement(b.a,{onClick:this.onClickEditButton.bind(this,"dates")},i.a.createElement(fe.a,null)))),i.a.createElement(y.a,{className:j.contentRow,variant:"body1",gutterBottom:!0,component:"div",contentEditable:"admin"===w,suppressContentEditableWarning:!0,onBlur:this.onBlur.bind(this,"description")},h),i.a.createElement(y.a,{variant:"h6"},i.a.createElement(le.a,{fontWeight:"fontWeightBold"},"\u20ac",i.a.createElement("span",{contentEditable:"admin"===w,suppressContentEditableWarning:!0,onBlur:this.onBlur.bind(this,"price"),className:j.contentRow},m)))),i.a.createElement(ue.a,{className:j.actions},"user"===w&&i.a.createElement(de.a,{badgeContent:f,color:"primary"},i.a.createElement(be.a,{value:"check",selected:Boolean(v),onChange:function(){return g(!v)}},i.a.createElement(y.a,{variant:"button"},"Follow"))),"admin"===w&&c>0&&i.a.createElement(b.a,{onClick:O},i.a.createElement(he.a,null))))}}]),a}(r.PureComponent),ke={id:0,destination:"New Destination",from:"2021-01-01",to:"2021-01-07",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Labore consequuntur assumenda aspernatur dolore voluptatum nesciunt doloremque velit officia eius quia! Laudantium facere similique fugiat pariatur est. Quod repudiandae eveniet nihil.",price:0,image:"/images/airplane.png",followers:0,isFollowing:!1,userRole:"admin"};je.defaultProps=ke;var Ce,xe=Object(O.a)({root:{},media:{height:140,position:"relative",backgroundSize:function(e){return e.image.endsWith("airplane.png")?"contain":"default"},"& .overlay":{display:"flex",flexFlow:"row-reverse nowrap",position:"absolute",right:0,bottom:0,left:0,opacity:0,backgroundColor:"black"},"&:hover .overlay":{opacity:.5},"&.editing .overlay":{opacity:1}},imageEditTextField:{backgroundColor:"white"},imageEditButton:{color:"rgba(255, 255, 255, 1.0)"},contentRow:{position:"relative",outlineColor:"#3f51b5","& .overlay":{display:"none",flexDirection:"row-reverse",position:"absolute",right:0,bottom:0,left:0},"&:hover .overlay":{display:"flex"}},datesForm:{display:"flex",flexDirection:"column",alignItems:"center",outline:"2px solid #3f51b5",outlineRadius:"4px"},actions:{flexDirection:function(e){return"admin"===e.userRole?"row-reverse":"row"}}})(je);var De=Object(A.b)("vacations/loadAll",Object(D.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("/vacation/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Ae=Object(A.b)("vacations/loadOne",function(){var e=Object(D.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("/vacation/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(A.b)("vacations/add",function(){var e=Object(D.a)(x.a.mark((function e(t){var a,n,r,i,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.destination,n=t.from,r=t.to,i=t.price,o=t.description,s=t.image,e.next=3,Te("POST","/vacation",{destination:a,from:n,to:r,price:i,description:o,image:s});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se=Object(A.b)("vacations/change",function(){var e=Object(D.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=Object(L.a)(t,["id"]),e.next=3,Te("PATCH","/vacation/".concat(a),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Be=Object(A.b)("vacations/delete",function(){var e=Object(D.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("/vacation/".concat(t),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Te(e,t,a){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(D.a)(x.a.mark((function e(t,a,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(a,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){var a=t.id,n=Object(L.a)(t,["id"]);e.loading=!1,e.error=!1;var r=e.vacations.find((function(e){return e.id===a}));r?Object.assign(r,Object(q.a)({},n)):e.vacations.push(Object(q.a)({id:a},n))}var Pe=Object(A.c)({name:"vacations",initialState:{error:!1,loading:!1,vacations:[]},reducers:{setFollowing:function(e,t){var a=t.payload,n=a.id,r=a.isFollowing;e.error=!1;var i=e.vacations.find((function(e){return e.id===n}));i?i.isFollowing=r:e.error=new Error("Vacation ID ".concat(n," doesn't exist in the Redux store."))}},extraReducers:(Ce={},Object(k.a)(Ce,De.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(Ce,De.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(k.a)(Ce,De.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(k.a)(Ce,Ae.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(Ce,Ae.fulfilled,(function(e,t){Re(e,t.payload)})),Object(k.a)(Ce,Ae.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(k.a)(Ce,Fe.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(Ce,Fe.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(k.a)(Ce,Fe.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(k.a)(Ce,Se.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(Ce,Se.fulfilled,(function(e,t){Re(e,t.payload)})),Object(k.a)(Ce,Se.rejected,(function(e,t){var a=t.error,n=t.meta.arg,r=n.id,i=n.isFollowing;e.loading=!1,e.error=a,"boolean"===typeof i&&(e.vacations.find((function(e){return e.id===r})).isFollowing=!i)})),Object(k.a)(Ce,Be.pending,(function(e){e.error=!1,e.loading=!0})),Object(k.a)(Ce,Be.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.error=!1,e.vacations=a})),Object(k.a)(Ce,Be.rejected,(function(e,t){var a=t.error;e.loading=!1,e.error=a})),Object(k.a)(Ce,T.fulfilled,(function(e){e.error=!1,e.vacations=[]})),Ce)}),Me=Pe.actions.setFollowing,Le=Pe.reducer,Ue=a(190),We=a(181),qe=a(182),Ie=a(183),Ve=a(101),ze=a.n(Ve),He=Object(O.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(L.a)(e,["children","classes","onClose"]);return i.a.createElement(Ue.a,Object.assign({disableTypography:!0,className:a.root},r),i.a.createElement(y.a,{variant:"h6"},t),n&&i.a.createElement(b.a,{className:a.closeButton,onClick:n},i.a.createElement(ze.a,null)))})),Ke=Object(O.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},content:{backgroundColor:"#f5f5f5"},okButton:{color:"#cb2431",backgroundColor:"#fff",transitionProperty:"all","&:hover":{color:"#fff",backgroundColor:"#cb2431"}}}}))((function(e){var t=e.open,a=e.title,n=e.children,r=e.okButtonLabel,o=e.onOk,s=e.onCancel,c=e.classes;return i.a.createElement(We.a,{open:t},i.a.createElement(He,{onClose:s},a),i.a.createElement(qe.a,{dividers:!0,className:c.content},n),i.a.createElement(Ie.a,null,i.a.createElement(E.a,{variant:"text",color:"primary",autoFocus:!0,className:c.okButton,onClick:o},r)))})),Ge=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={add:!1,idToDelete:0,newVacationProps:Object(q.a)({},ke)},n}return Object(u.a)(a,[{key:"openAddDialog",value:function(){return this.setState({add:!0})}},{key:"closeAddDialog",value:function(){return this.setState({add:!1})}},{key:"onOkAddDialog",value:function(){return(0,this.props.addAsync)(this.state.newVacationProps),this.closeAddDialog()}},{key:"onChangeFollowing",value:function(e,t){var a={id:e,isFollowing:t},n=this.props,r=n.setFollowing,i=n.changeAsync;r(a),i(a)}},{key:"onChangeFields",value:function(e,t){(0,this.props.changeAsync)(Object(q.a)({id:e},t))}},{key:"onDelete",value:function(e){this.setState({idToDelete:e})}},{key:"onCancelDelete",value:function(){this.setState({idToDelete:0})}},{key:"onOkDelete",value:function(){var e=this.props.deleteAsync,t=this.state.idToDelete;this.setState({idToDelete:0}),e(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.userRole,r=t.vacations,o=t.loading,s=t.error,c=this.state,l=c.add,u=c.newVacationProps,d=c.idToDelete,m="",p="",f="";if(d>0){var b=r.find((function(e){return e.id===d}));m=b.destination,p=b.from,f=b.to}return i.a.createElement(h.a,{maxWidth:"xl",className:a.root},i.a.createElement(ne.a,{utils:I.a},i.a.createElement(V.a,{container:!0,spacing:4},r.map((function(t){var a=t.id,r=Object(L.a)(t,["id"]);return i.a.createElement(V.a,{item:!0,key:a,xs:12,sm:6,md:4,xl:3},i.a.createElement(xe,Object.assign({id:a},r,{userRole:n,onDelete:e.onDelete.bind(e,a),onChangeFields:e.onChangeFields.bind(e,a),onChangeFollowing:e.onChangeFollowing.bind(e,a)})))}))),"admin"===n&&i.a.createElement(z.a,{color:"primary",onClick:this.openAddDialog.bind(this),className:a.fab},i.a.createElement(te.a,null)),i.a.createElement(Ke,{open:l,title:"New Vacation",okButtonLabel:"Create",onOk:this.onOkAddDialog.bind(this),onCancel:this.closeAddDialog.bind(this)},i.a.createElement(xe,Object.assign({},u,{onChangeFields:function(t){return e.setState({newVacationProps:Object(q.a)(Object(q.a)({},u),t)})}}))),i.a.createElement(Ke,{open:d>0,title:"Delete this vacation?",okButtonLabel:"Yes, delete",onOk:this.onOkDelete.bind(this),onCancel:this.onCancelDelete.bind(this)},i.a.createElement(H.a,{component:K.a},i.a.createElement(G.a,null,i.a.createElement(J.a,null,i.a.createElement(Z.a,null,i.a.createElement($.a,{component:"th",align:"center",colSpan:2},m))),i.a.createElement(Q.a,null,i.a.createElement(Z.a,null,i.a.createElement($.a,{component:"th",scope:"row"},"Start:"),i.a.createElement($.a,{align:"right"},p)),i.a.createElement(Z.a,null,i.a.createElement($.a,{component:"th",scope:"row"},"Finish:"),i.a.createElement($.a,{align:"right"},f)))))),i.a.createElement(Y.a,{open:o,className:a.loadingBackdrop},i.a.createElement(X.a,{className:a.progress})),i.a.createElement(Y.a,{open:0===r.length,className:a.emptyBackdrop},i.a.createElement(y.a,{variant:"h3",component:"h3"},"There are no vacations in the system."),"admin"===n?i.a.createElement(E.a,{variant:"outlined",onClick:this.openAddDialog.bind(this)},"Click here to add some."):i.a.createElement(y.a,{variant:"h5"},"Please try again later.")),i.a.createElement(_.a,{open:"string"===typeof(null===s||void 0===s?void 0:s.message)},i.a.createElement(ae.a,{variant:"filled",severity:"error",elevation:6},null===s||void 0===s?void 0:s.message))))}},{key:"componentDidMount",value:function(){var e=Object(D.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.vacations,n=t.loadAllAsync,(null===a||void 0===a?void 0:a.length)||n();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(r.Component),Je={setFollowing:Me,loadAllAsync:De,addAsync:Fe,changeAsync:Se,deleteAsync:Be},Ze=Object(c.b)((function(e){var t=e.user,a=t.name,n=t.role,r=e.vacations,i=r.error,o=r.loading,s=r.vacations;return{username:a,userRole:n,error:i,loading:o,vacations:Object(W.a)(s).sort((function(e,t){var a=e.isFollowing;return t.isFollowing-a}))}}),Je)(Object(M.g)(Object(O.a)((function(e){return{root:{padding:"2rem",backgroundColor:"#f5f5f5"},logout:{float:"right"},loadingBackdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},progress:{width:"90%"},emptyBackdrop:{flexDirection:"column"}}}))(Ge))),$e=a(185),Qe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n}return Object(u.a)(a,[{key:"onSubmit",value:function(){var e=Object(D.a)(x.a.mark((function e(t){var a,n,r,i,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.logInAsync,r=a.history,i=this.state,o=i.username,s=i.password,this.setState({submitted:!0}),e.next=6,n({username:o,password:s});case 6:r.push("/");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChangeField",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.loading,n=e.error,r=this.state,o=r.username,s=r.password;return i.a.createElement("div",{className:t.root},i.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit.bind(this)},i.a.createElement(ie.a,{variant:"outlined",type:"text",name:"username",label:"Username",value:o,onChange:this.onChangeField.bind(this)}),i.a.createElement(ie.a,{variant:"outlined",type:"password",name:"password",label:"Password",value:s,onChange:this.onChangeField.bind(this)}),i.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:!o||!s||a},a?i.a.createElement($e.a,null):"Log In")),i.a.createElement(_.a,{open:n},i.a.createElement(ae.a,{variant:"filled",severity:"error",elevation:6},n.message)))}}]),a}(r.Component),Ye=Object(c.b)((function(e){var t=e.user;return{loading:t.loading,error:t.error}}),{logInAsync:B})(Object(M.g)(Object(O.a)((function(e){return{root:{"& .MuiTextField-root, & .MuiButton-root":{margin:e.spacing(1)},"& .MuiTextField-root":{width:"25ch"}}}}))(Qe))),Xe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={firstname:"",lastname:"",username:"",password:"",password2:"",available:!0,submitted:!1},n}return Object(u.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"onSubmit",value:function(){var e=Object(D.a)(x.a.mark((function e(t){var a,n,r,i,o,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({submitted:!0}),e.prev=2,a=this.state,n=a.firstname,r=a.lastname,i=a.username,o=a.password,(s=new URLSearchParams).set("firstname",n),s.set("lastname",r),s.set("username",i),s.set("password",o),e.next=11,fetch("/user",{method:"POST",body:s});case 11:c=e.sent,201===c.status&&this.setState({firstname:"",lastname:"",username:"",password:"",password2:""});case 14:return e.prev=14,this.setState({submitted:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.username,r=e.available,o=e.password,s=e.password2,c=e.submitted,l=this.props.classes;return i.a.createElement("form",{className:l.root,noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit.bind(this)},i.a.createElement(ie.a,{variant:"outlined",type:"text",name:"firstname",label:"First Name",helperText:!t&&"Required.",error:!t,value:t,onChange:this.onChange.bind(this)}),i.a.createElement(ie.a,{variant:"outlined",type:"text",name:"lastname",label:"Last Name",helperText:!a&&"Required.",error:!a,value:a,onChange:this.onChange.bind(this)}),i.a.createElement(ie.a,{variant:"outlined",type:"text",name:"username",label:"Username",helperText:n?!r&&'"'.concat(n,'" is not available.'):"Required.",error:!n||!r,value:n,onChange:this.onChange.bind(this)}),i.a.createElement(ie.a,{variant:"outlined",type:"password",name:"password",label:"Password",helperText:!o&&"Required.",error:!o,value:o,onChange:this.onChange.bind(this)}),i.a.createElement(ie.a,{variant:"outlined",type:"password",name:"password2",label:"Repeat Password",helperText:o!==s&&"Passwords don't match.",error:o!==s,value:s,onChange:this.onChange.bind(this)}),i.a.createElement(E.a,{variant:"contained",type:"submit",color:"primary",size:"large",disabled:!t||!a||!n||!r||!o||o!==s||c,ref:this.submitButton},"Sign Up"))}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(x.a.mark((function e(t,a){var n,r,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.username,!(r=this.state.username)||r===n){e.next=8;break}return e.next=5,fetch("/user/".concat(r),{method:"HEAD"});case 5:i=e.sent,o=i.status,this.setState({available:404===o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(r.Component),_e=Object(M.g)(Object(O.a)((function(e){return{root:{"& .MuiTextField-root, & .MuiButton-root":{margin:e.spacing(1)},"& .MuiTextField-root":{width:"25ch"}}}}))(Xe)),et=a(83),tt=a.n(et),at=a(103),nt=a.n(at),rt=new ge.Html5Entities,it=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={chartOptions:{chart:{type:"bar"},title:{text:"Followers by Vacation"},xAxis:{categories:["Africa","America","Asia","Europe","Oceania"],title:{text:"Vacation ID"}},yAxis:{min:0,title:{text:null},labels:{overflow:"justify"}},tooltip:{},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{},credits:{enabled:!1},series:[]}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.vacations,t=this.state.chartOptions;return(null===e||void 0===e?void 0:e.length)>0?i.a.createElement(nt.a,{highcharts:tt.a,options:t}):i.a.createElement("h1",null,"No vacation is being followed.")}},{key:"componentDidMount",value:function(){var e=this.props.vacations;this.updateChartOptions(e)}},{key:"componentDidUpdate",value:function(e){var t=e.vacations,a=this.props.vacations,n=Ee.a.xor(t,a);Ee.a.isEmpty(n)||this.updateChartOptions(a)}},{key:"updateChartOptions",value:function(e){var t=this,a=this.state.chartOptions,n=a.xAxis,r=(n.categories,Object(L.a)(n,["categories"])),i=(a.series,Object(L.a)(a,["xAxis","series"]));this.setState({chartOptions:Object(q.a)({xAxis:Object(q.a)({categories:e.map((function(e){return e.id}))},r),series:[{name:"Followers",data:e.map((function(e){var a=e.destination,n=e.from,r=e.to,i=e.followers;return{name:t.formatCategory(a,n,r),y:i}}))}]},i)})}},{key:"formatCategory",value:function(e,t,a){return rt.decode("".concat(e,", ").concat(t," &ndash; ").concat(a))}}]),a}(r.Component),ot=Object(c.b)((function(e){return{vacations:e.vacations.vacations.filter((function(e){return e.followers>0}))}}))(it),st=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={menuAnchorEl:null},n}return Object(u.a)(a,[{key:"onClickMenuButton",value:function(e){var t=e.currentTarget;this.setState({menuAnchorEl:t})}},{key:"onCloseMenu",value:function(){this.setState({menuAnchorEl:null})}},{key:"render",value:function(){var e=this.props,t=e.username,a=e.userRole,n=e.logOutAsync,r=e.classes,o=this.state.menuAnchorEl;return i.a.createElement(P.a,null,i.a.createElement(h.a,{maxWidth:"xl",className:r.root},i.a.createElement(p.a,{position:"fixed"},i.a.createElement(f.a,null,i.a.createElement(b.a,{edge:"start",color:"inherit",disabled:!t,onClick:this.onClickMenuButton.bind(this),className:r.menuButton},i.a.createElement(j.a,null)),i.a.createElement(v.a,{anchorEl:o,open:o,onClose:this.onCloseMenu.bind(this)},i.a.createElement(g.a,null,i.a.createElement(P.b,{to:"/"},"Home")),i.a.createElement(g.a,null,i.a.createElement(P.b,{to:"/chart",disabled:"admin"!==a},"Chart"))),i.a.createElement(y.a,{variant:"h6",className:r.title},"Vacations"),t?i.a.createElement(E.a,{color:"inherit",onClick:n},"Log Out"):i.a.createElement(E.a,{color:"inherit"},"Log In"))),i.a.createElement(f.a,null),i.a.createElement(M.d,null,i.a.createElement(M.b,{exact:!0,path:"/signup"},i.a.createElement(_e,null),i.a.createElement(P.b,{to:"/login"},"Already have an account?")),i.a.createElement(M.b,{exact:!0,path:"/login"},i.a.createElement(Ye,null),i.a.createElement(P.b,{to:"/signup"},"Don't have an account yet?")),i.a.createElement(U,{exact:!0,path:"/chart",component:ot}),i.a.createElement(U,{exact:!0,path:"/",component:Ze}))))}}]),a}(r.PureComponent);var ct={logInAsync:B,logOutAsync:T},lt=Object(c.b)((function(e){return{username:e.user.name}}),ct)(Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logout:{float:"right"}}}))(st)),ut=Object(A.a)({reducer:{user:R,vacations:Le}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:ut},i.a.createElement(lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[128,1,2]]]);
//# sourceMappingURL=main.c2443d95.chunk.js.map